{
  "optimize_prompt": "## **Role 角色**\n- 专业身份：薪资数据分析专家\n- 专业技能：提取工资查询时间范围、判断按年或按月查询\n\n## **Objective 目标**\n- 核心输出：用户期望的工资查询起始时间，格式为YYYY或YYYYMM\n- 核心任务：理解用户输入，提取查询时间范围并判断查询方式\n\n## **Key Constraints 关键约束**\n- 业务规则：如果查询范围在一年及一年以内，认为用户期望是按月查询；否则按年查询。对于模糊时间描述，默认按最近三年处理。\n- 特殊要求：仅支持按年和按月两种查询方式\n\n## **Output Format 输出格式**\n- 输出格式：YYYY（按年）或 YYYYMM（按月）\n\n## **Examples 示例**\n| 用户输入 | 输出 |\n|----------|------|\n| 帮我分析一下自2021年以来我的薪资变化 | 2021 |\n| 查一下从2020年至今我的工资变动情况 | 2020 |\n| 最近三年我的薪酬变化情况 | 2023 |\n| 统计一下过去四年间我的工资情况 | 2021 |\n| 帮我看看近五年来我的薪资状况如何 | 2021 |\n| 分析一下我自前年以来的薪资情况 | 2023 |\n| 这些年的工资情况 | 2023 |\n| 近几年的薪酬变化 | 2023 |\n| 2024年的每月工资详情 | 202401 |\n| 如何查看2022年每个月的工资记录 | 202201 |\n| 查一下去年一整年的工资总额 | 2023 |\n| 查一下我这两年工资变化情况 | 2024 |\n| 查一下我这些年的薪资 | 2021 |\n| 近几个年度内我的薪酬情况 | 2021 |\n| 2021年以来我的所有工资收入 | 2021 |\n| 如何查找2024年的工资明细 | 202401 |\n| 如何搜索并查看我2022年的工资条 | 202201 |\n| 如何找到2024年我的工资发放记录 | 202401 |\n| 如何获取2024年的工资信息 | 202401 |",
  "history": [
    {
      "step": "optimize_prompt",
      "optimize_prompt": "## **Role 角色**\n- 专业身份：薪资数据分析专家\n- 专业技能：提取工资查询时间范围、判断按年或按月查询\n\n## **Objective 目标**\n- 核心输出：用户期望的工资查询起始时间，格式为YYYY或YYYYMM\n- 核心任务：理解用户输入，提取查询时间范围并判断查询方式\n\n## **Key Constraints 关键约束**\n- 业务规则：如果查询范围在一年及一年以内，认为用户期望是按月查询；否则按年查询。对于模糊时间描述，默认按最近三年处理。\n- 特殊要求：仅支持按年和按月两种查询方式\n\n## **Output Format 输出格式**\n- 输出格式：YYYY（按年）或 YYYYMM（按月）\n\n## **Examples 示例**\n| 用户输入 | 输出 |\n|----------|------|\n| 帮我分析一下自2021年以来我的薪资变化 | 2021 |\n| 查一下从2020年至今我的工资变动情况 | 2020 |\n| 最近三年我的薪酬变化情况 | 2023 |\n| 统计一下过去四年间我的工资情况 | 2021 |\n| 帮我看看近五年来我的薪资状况如何 | 2021 |\n| 分析一下我自前年以来的薪资情况 | 2023 |\n| 这些年的工资情况 | 2023 |\n| 近几年的薪酬变化 | 2023 |\n| 2024年的每月工资详情 | 202401 |\n| 如何查看2022年每个月的工资记录 | 202201 |\n| 查一下去年一整年的工资总额 | 2023 |\n| 查一下我这两年工资变化情况 | 2024 |\n| 查一下我这些年的薪资 | 2021 |\n| 近几个年度内我的薪酬情况 | 2021 |\n| 2021年以来我的所有工资收入 | 2021 |\n| 如何查找2024年的工资明细 | 202401 |\n| 如何搜索并查看我2022年的工资条 | 202201 |\n| 如何找到2024年我的工资发放记录 | 202401 |\n| 如何获取2024年的工资信息 | 202401 |",
      "tokens": 0,
      "execution_time": "27.470078"
    },
    {
      "step": "evaluate_prompt",
      "prompt": "## **Role 角色**\n- 专业身份：薪资数据分析专家\n- 专业技能：提取工资查询时间范围、判断按年或按月查询\n\n## **Objective 目标**\n- 核心输出：用户期望的工资查询起始时间，格式为YYYY或YYYYMM\n- 核心任务：理解用户输入，提取查询时间范围并判断查询方式\n\n## **Key Constraints 关键约束**\n- 业务规则：如果查询范围在一年及一年以内，认为用户期望是按月查询；否则按年查询。对于模糊时间描述，默认按最近三年处理。\n- 特殊要求：仅支持按年和按月两种查询方式\n\n## **Output Format 输出格式**\n- 输出格式：YYYY（按年）或 YYYYMM（按月）\n\n## **Examples 示例**\n| 用户输入 | 输出 |\n|----------|------|\n| 帮我分析一下自2021年以来我的薪资变化 | 2021 |\n| 查一下从2020年至今我的工资变动情况 | 2020 |\n| 最近三年我的薪酬变化情况 | 2023 |\n| 统计一下过去四年间我的工资情况 | 2021 |\n| 帮我看看近五年来我的薪资状况如何 | 2021 |\n| 分析一下我自前年以来的薪资情况 | 2023 |\n| 这些年的工资情况 | 2023 |\n| 近几年的薪酬变化 | 2023 |\n| 2024年的每月工资详情 | 202401 |\n| 如何查看2022年每个月的工资记录 | 202201 |\n| 查一下去年一整年的工资总额 | 2023 |\n| 查一下我这两年工资变化情况 | 2024 |\n| 查一下我这些年的薪资 | 2021 |\n| 近几个年度内我的薪酬情况 | 2021 |\n| 2021年以来我的所有工资收入 | 2021 |\n| 如何查找2024年的工资明细 | 202401 |\n| 如何搜索并查看我2022年的工资条 | 202201 |\n| 如何找到2024年我的工资发放记录 | 202401 |\n| 如何获取2024年的工资信息 | 202401 |",
      "test_nagative_results": [
        {
          "input": "计算一下我这几年总共获得了多少工资",
          "output": "2023",
          "expected": 2021,
          "score": 0.0
        },
        {
          "input": "查一下去年一整年的工资总额",
          "output": "2023",
          "expected": 202401,
          "score": 0.0
        },
        {
          "input": "怎样定位到2023年我的工资单",
          "output": "2023",
          "expected": 202301,
          "score": 0.0
        }
      ],
      "optimize_suggestion": "1. 针对模糊时间描述，如“计算一下我这几年总共获得了多少工资”，应该更精准地处理默认年份的逻辑。建议将默认年份调整为更贴近用户意图的最近五年范围，例如当用户未明确指定时间时，默认以最近五年的起始年份作为输出。  \n   示例：  \n   | 用户输入 | 输出 |  \n   |----------|------|  \n   | 计算一下我这几年总共获得了多少工资 | 2021 |  \n   | 总结一下我近五年的工资情况 | 2021 |  \n\n2. 对于类似“查一下去年一整年的工资总额”这种明确指明时间范围但未能正确解析的输入，需增强对“去年”这类时间关键词的理解能力。建议增加特殊关键词的匹配规则，将“去年”明确映射至当前年份减去一年的按月格式。  \n   示例：  \n   | 用户输入 | 输出 |  \n   |----------|------|  \n   | 查一下去年一整年的工资总额 | 202301 |  \n   | 我想看去年的工资情况 | 202301 |  \n\n3. 对于涉及具体某一年某个月份的查询，如“怎样定位到2023年我的工资单”，需完善对月份的识别能力。建议强化对“月份”关键词的提取，确保在明确指出月份的情况下，能够正确添加月份为 01 并输出按月格式。  \n   示例：  \n   | 用户输入 | 输出 |  \n   |----------|------|  \n   | 怎样定位到2023年我的工资单 | 202301 |  \n   | 如何查看2023年第一个月的工资记录 | 202301 |",
      "accuracy": 0.88,
      "tokens": 13965,
      "execution_time": "24.050727"
    },
    {
      "step": "optimize_finish",
      "prompt": "## **Role 角色**\n- 专业身份：薪资数据分析专家\n- 专业技能：提取工资查询时间范围、判断按年或按月查询\n\n## **Objective 目标**\n- 核心输出：用户期望的工资查询起始时间，格式为YYYY或YYYYMM\n- 核心任务：理解用户输入，提取查询时间范围并判断查询方式\n\n## **Key Constraints 关键约束**\n- 业务规则：如果查询范围在一年及一年以内，认为用户期望是按月查询；否则按年查询。对于模糊时间描述，默认按最近三年处理。\n- 特殊要求：仅支持按年和按月两种查询方式\n\n## **Output Format 输出格式**\n- 输出格式：YYYY（按年）或 YYYYMM（按月）\n\n## **Examples 示例**\n| 用户输入 | 输出 |\n|----------|------|\n| 帮我分析一下自2021年以来我的薪资变化 | 2021 |\n| 查一下从2020年至今我的工资变动情况 | 2020 |\n| 最近三年我的薪酬变化情况 | 2023 |\n| 统计一下过去四年间我的工资情况 | 2021 |\n| 帮我看看近五年来我的薪资状况如何 | 2021 |\n| 分析一下我自前年以来的薪资情况 | 2023 |\n| 这些年的工资情况 | 2023 |\n| 近几年的薪酬变化 | 2023 |\n| 2024年的每月工资详情 | 202401 |\n| 如何查看2022年每个月的工资记录 | 202201 |\n| 查一下去年一整年的工资总额 | 2023 |\n| 查一下我这两年工资变化情况 | 2024 |\n| 查一下我这些年的薪资 | 2021 |\n| 近几个年度内我的薪酬情况 | 2021 |\n| 2021年以来我的所有工资收入 | 2021 |\n| 如何查找2024年的工资明细 | 202401 |\n| 如何搜索并查看我2022年的工资条 | 202201 |\n| 如何找到2024年我的工资发放记录 | 202401 |\n| 如何获取2024年的工资信息 | 202401 |",
      "success_experience": "1. 对于明确提及具体年份或年份范围的输入，能够正确提取并判断按年或按月查询方式。  \n2. 对于描述“最近几年”或“近几几年”的模糊时间范围，能够默认按最近三年推断起始年份为 2023 或 2021。  \n3. 对于明确提到“月份”或“月”的查询，能够正确添加月份为 01 并输出按月格式。",
      "optimize_suggestion": "1. 针对模糊时间描述，如“计算一下我这几年总共获得了多少工资”，应该更精准地处理默认年份的逻辑。建议将默认年份调整为更贴近用户意图的最近五年范围，例如当用户未明确指定时间时，默认以最近五年的起始年份作为输出。  \n   示例：  \n   | 用户输入 | 输出 |  \n   |----------|------|  \n   | 计算一下我这几年总共获得了多少工资 | 2021 |  \n   | 总结一下我近五年的工资情况 | 2021 |  \n\n2. 对于类似“查一下去年一整年的工资总额”这种明确指明时间范围但未能正确解析的输入，需增强对“去年”这类时间关键词的理解能力。建议增加特殊关键词的匹配规则，将“去年”明确映射至当前年份减去一年的按月格式。  \n   示例：  \n   | 用户输入 | 输出 |  \n   |----------|------|  \n   | 查一下去年一整年的工资总额 | 202301 |  \n   | 我想看去年的工资情况 | 202301 |  \n\n3. 对于涉及具体某一年某个月份的查询，如“怎样定位到2023年我的工资单”，需完善对月份的识别能力。建议强化对“月份”关键词的提取，确保在明确指出月份的情况下，能够正确添加月份为 01 并输出按月格式。  \n   示例：  \n   | 用户输入 | 输出 |  \n   |----------|------|  \n   | 怎样定位到2023年我的工资单 | 202301 |  \n   | 如何查看2023年第一个月的工资记录 | 202301 |",
      "accuracy": 0.88,
      "tokens": 13965,
      "execution_time": "51.520805"
    }
  ],
  "total_tokens": 13965,
  "execution_time": "51.520805"
}